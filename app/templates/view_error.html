{% extends 'base.html' %}

{% block title %}Chi tiết Lỗi - Task {{ task.id }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Chi tiết Lỗi - Task #{{ task.id }}: {{ task.name }}</h1>

    <div class="card mb-4">
        <div class="card-header">
            Thông tin Tác vụ
        </div>
        <div class="card-body">
            <p><strong>ID:</strong> {{ task.id }}</p>
            <p><strong>Tên:</strong> {{ task.name }}</p>
            <p><strong>URL:</strong> <a href="{{ task.url }}" target="_blank">{{ task.url }}</a></p>
            <p><strong>Trạng thái:</strong> <span class="badge bg-danger">{{ task.status }}</span></p>
            <p><strong>Lần chạy cuối:</strong> {{ task.last_run | to_local_time | format_datetime('%d/%m/%Y %H:%M:%S') if task.last_run else 'Chưa chạy' }}</p>
            <p><strong>Lịch trình:</strong> {{ task.schedule if task.schedule else 'Không có' }}</p>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-danger text-white">
            <i class="fas fa-exclamation-triangle me-2"></i>Thông điệp Lỗi
        </div>
        <div class="card-body">
            <pre class="bg-light p-3 rounded"><code>{{ task.error_message }}</code></pre>
        </div>
    </div>

    <a href="{{ url_for('main.task_list') }}" class="btn btn-secondary mt-4"><i class="fas fa-arrow-left me-2"></i>Quay lại Danh sách</a>
</div>
{% endblock %} 